
> @google/gemini-cli@0.21.0-nightly.20251209.ec9a8c7a7 test
> vitest run pause.test


 RUN  v3.2.4 /Users/bill/projects/gemini-cli/packages/cli
      Coverage enabled with v8

 ‚úì src/ui/AppContainer.pause.test.tsx (20 tests) 4ms
 ‚úì src/ui/components/InputPrompt.pause.test.tsx (30 tests) 7ms
 ‚ùØ src/ui/components/LoadingIndicator.pause.test.tsx (10 tests | 1 failed) 64ms
   ‚úì <LoadingIndicator /> - Pause Display > should render prominent pause indicator when streamingState is Paused 19ms
   ‚úì <LoadingIndicator /> - Pause Display > should show help text for unpausing 1ms
   ‚úì <LoadingIndicator /> - Pause Display > should not show regular loading content when paused 1ms
   √ó <LoadingIndicator /> - Pause Display > should transition from Responding to Paused correctly 27ms
     ‚Üí expected '\n  ERROR  Text string "MockSpinner" ‚Ä¶' to contain 'PAUSED'
   ‚úì <LoadingIndicator /> - Pause Display > should transition from Paused back to Responding correctly 10ms
   ‚úì <LoadingIndicator /> - Pause Display > should render pause indicator on narrow terminals 1ms
   ‚úì <LoadingIndicator /> - Pause Display > should render pause indicator on wide terminals 1ms
   ‚úì <LoadingIndicator /> - Pause Display > should ignore rightContent when paused 1ms
   ‚úì <LoadingIndicator /> - Pause Display > should ignore thought when paused 1ms
   ‚úì <LoadingIndicator /> - Pause Display > should prioritize pause state over all other states 1ms


‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ Failed Tests 1 ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ

 FAIL  src/ui/components/LoadingIndicator.pause.test.tsx > <LoadingIndicator /> - Pause Display > should transition from Responding to Paused correctly
AssertionError: expected '\n  ERROR  Text string "MockSpinner" ‚Ä¶' to contain 'PAUSED'
 Test Files  1 failed | 2 passed (3)
      Tests  1 failed | 59 passed (60)

   Start at  15:00:49
[32m- Expected[39m
   Duration  2.53s (transform 539ms, setup 51ms, collect 1.33s, tests 76ms, environment 0ms, prepare 170ms)
[31m+ Received[39m


[32m- PAUSED[39m
[31m+[39m
[31m+   ERROR  Text string "MockSpinner" must be rendered inside <Text> component[39m
[31m+[39m
[31m+  file:///Users/bill/projects/gemini-cli/node_modules/ink/src/reconciler.ts:220:10[39m
[31m+[39m
[31m+  -createTextInstance[39m
[31m+                     (file:///Users/bill/projects/gemini-cli/node_modules/ink/src/reconciler.ts:220:[39m
JUNIT report written to /Users/bill/projects/gemini-cli/packages/cli/junit.xml
[31m+                     10)[39m
[31m+  -completeWor[39m
[31m+              (/Users/bill/projects/gemini-cli/node_modules/react-reconciler/cjs/react-reconciler.de[39m
[31m+              velopment.js:9082:42)[39m
[31m+  -runWithFiberIn[39m
[31m+   EV            (/Users/bill/projects/gemini-cli/node_modules/react-reconciler/cjs/react-reconciler[39m
[31m+                 .development.js:1738:13)[39m
[31m+  -completeUnitOfW[39m
[31m+   rk             (/Users/bill/projects/gemini-cli/node_modules/react-reconciler/cjs/react-reconcile[39m
[31m+                  r.development.js:12962:19)[39m
[31m+  -performUnitOfW[39m
[31m+   rk            (/Users/bill/projects/gemini-cli/node_modules/react-reconciler/cjs/react-reconciler[39m
[31m+                 .development.js:12843:11)[39m
[31m+  -workLoopSyn[39m
[31m+              (/Users/bill/projects/gemini-cli/node_modules/react-reconciler/cjs/react-reconciler.de[39m
[31m+              velopment.js:12644:41)[39m
[31m+  -renderRootSy[39m
[31m+   c           (/Users/bill/projects/gemini-cli/node_modules/react-reconciler/cjs/react-reconciler.d[39m
[31m+               evelopment.js:12624:11)[39m
[31m+  -performWorkOnR[39m
[31m+   ot            (/Users/bill/projects/gemini-cli/node_modules/react-reconciler/cjs/react-reconciler[39m
[31m+                 .development.js:12135:44)[39m
[31m+  -performSyncWorkOn[39m
[31m+   oot              (/Users/bill/projects/gemini-cli/node_modules/react-reconciler/cjs/react-reconci[39m
[31m+                    ler.development.js:2446:7)[39m
[31m+  -flushSyncWorkAcrossRoo[39m
[31m+   s_impl                (/Users/bill/projects/gemini-cli/node_modules/react-reconciler/cjs/react-re[39m
[31m+                         conciler.development.js:2294:21)[39m
[31m+[39m

 ‚ùØ src/ui/components/LoadingIndicator.pause.test.tsx:103:20
    101|     
    102|     output = lastFrame();
    103|     expect(output).toContain('PAUSED');
       |                    ^
    104|     expect(output).not.toContain('MockSpinner');
    105|     unmount();

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/1]‚éØ

npm error Lifecycle script `test` failed with error:
npm error code 1
npm error path /Users/bill/projects/gemini-cli/packages/cli
npm error workspace @google/gemini-cli@0.21.0-nightly.20251209.ec9a8c7a7
npm error location /Users/bill/projects/gemini-cli/packages/cli
npm error command failed
npm error command sh -c vitest run pause.test
